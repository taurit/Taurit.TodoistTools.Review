
@{
    ViewBag.Title = "Index";
}

<div data-bind="if: !loaded()">
    <div class="jumbotron">
        <h1>Loading...</h1>
        <p>Todoist Review App is getting your data. It should take no more than a few seconds. Please wait!</p>
    </div>
</div>
<h4 data-bind="if: loaded() && ajaxError()" class="hidden-by-default">Synchronization failed. Make sure, that your API key is valid. @Html.ActionLink("Click here to login again", "Login").</h4>
<h4 data-bind="if: loaded() && !ajaxError() && tasks().length == 0" class="hidden-by-default">You have no more tasks in the queue.</h4>
<div class="reviewedTask hidden-by-default" data-bind="if: loaded() && !ajaxError() && tasks().length !== 0">

    <div class="task" data-bind="with: currentTask">
        <span data-bind="text: content"></span>
    </div>

    <h4 data-bind="if: labels().length == 0">You have no labels defined. Define your contexts as labels in Todoist first.</h4>

    <div class="all-labels row" data-bind="foreach: labels">
        <div class="col-xs-4">
            <div class="label" data-bind='attr: {"data-id": id}'>
                <span data-bind="css: glyphicon" class="glyphicon"></span><br />
                <span data-bind="text: name"></span>
            </div>
        </div>
    </div>

    <nav class="footer row">
        <div class="col-xs-4">
            <button id="back" type="button" class="btn btn-lg" data-bind="enable: isFirstTask() === false">Back</button>
        </div>
        <div class="col-xs-8" data-bind="visible: isLastTask() === false">
            <button id="save" type="button" class="btn btn-primary btn-lg" data-bind="enable: isLastTask() === false">Next</button>
        </div>
        <div class="col-xs-8" data-bind="visible: isLastTask() === true">
            <button id="sync" type="button" class="btn btn-info btn-lg">Sync</button>
        </div>

    </nav>
</div>

<script src="~/Scripts/jquery-3.1.1.min.js"></script>
<script src="~/Scripts/knockout-3.4.2.js"></script>
<script src="~/Scripts/reviewapp.js"></script>
<script type="text/javascript">
    $(".hidden-by-default").removeClass("hidden-by-default");
</script>